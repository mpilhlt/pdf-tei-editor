<!-- File selection drawer -->
<sl-drawer name="fileDrawer" label="Collection &amp; Files" placement="start" style="--size: 400px;">
  <div style="display: flex; flex-direction: column; height: 100%;">
    
    <!-- Filter area at top -->
    <div style="padding: 1rem; border-bottom: 1px solid var(--sl-color-neutral-200); flex-shrink: 0;">
      
      <!-- Variant selection -->
      <div style="margin-bottom: 1rem;">
        <label style="display: block; margin-bottom: 0.5rem; font-weight: bold;">Variant:</label>
        <sl-select name="variantSelect" placeholder="Select variant..." size="small" hoist>
          <!-- Will be populated dynamically -->
        </sl-select>
      </div>
      
      <!-- Label filter input -->
      <div>
        <label style="display: block; margin-bottom: 0.5rem; font-weight: bold;">Filter by label:</label>
        <sl-input name="labelFilter" placeholder="Search documents..." size="small" clearable>
          <sl-icon name="search" slot="prefix"></sl-icon>
        </sl-input>
      </div>
      
    </div>
    
    <!-- Tree area - fills remaining space -->
    <div style="flex: 1; padding: 1rem; overflow-y: auto; min-height: 0; display: block; width: 100%;">
      <!-- Select all/none checkbox (hidden by default, shown when collections exist) -->
      <div name="selectAllContainer" style="display: none; margin-bottom: 0.5rem;">
        <sl-checkbox name="selectAllCheckbox" size="small">Select all/none</sl-checkbox>
      </div>

      <sl-tree name="fileTree" selection="leaf" style="width: 100%; min-height: 200px; display: block;">
        <!-- Will be populated dynamically -->
      </sl-tree>
    </div>
    
  </div>
  
  <!-- Footer with import, export, delete, new, and close buttons -->
  <div slot="footer" style="display: flex; justify-content: space-between; padding: 1rem; border-top: 1px solid var(--sl-color-neutral-200);">
    <div style="display: flex; gap: 0.5rem;">
      <sl-tooltip content="Import files from ZIP archive">
        <sl-button name="importButton" variant="default" size="small">
          <sl-icon name="upload"></sl-icon>
        </sl-button>
      </sl-tooltip>
      <sl-tooltip content="Export selected collections">
        <sl-dropdown name="exportDropdown" placement="bottom-start">
          <sl-button name="exportButton" variant="primary" size="small" slot="trigger" caret disabled>
            <sl-icon name="download"></sl-icon>
          </sl-button>
          <sl-menu name="exportMenu">
            <sl-menu-item name="exportDefault">Export Gold XML + PDF</sl-menu-item>
            <sl-menu-item name="exportWithVersions">Export all XML + PDF</sl-menu-item>
            <sl-divider></sl-divider>
            <sl-menu-item name="exportTeiOnly">Export Gold XML only</sl-menu-item>
            <sl-menu-item name="exportTeiAllVersions">Export all XML only</sl-menu-item>
            <sl-divider name="exportFormatsDivider" style="display: none;"></sl-divider>
            <div name="exportFormatCheckboxes" style="display: none; padding: 0.5rem;">
              <div>Additional Formats</div>
              <!-- Checkboxes will be injected here dynamically -->
            </div>
          </sl-menu>
        </sl-dropdown>
      </sl-tooltip>
      <sl-tooltip content="Delete selected collection">
        <sl-button name="deleteButton" variant="danger" size="small" disabled>
          <sl-icon name="trash"></sl-icon>
        </sl-button>
      </sl-tooltip>
      <sl-tooltip content="Create new collection">
        <sl-button name="newCollectionButton" variant="success" size="small">
          <sl-icon name="plus"></sl-icon>
        </sl-button>
      </sl-tooltip>
    </div>
    <sl-button name="closeDrawer" variant="default" size="small">
      Close
    </sl-button>
  </div>

  <!-- Hidden file input for import -->
  <input type="file" name="importFileInput" accept=".zip" style="display: none;">
</sl-drawer>