
> pdf-tei-editor@0.7.0 test:api
> node tests/backend-test-runner.js --local --test-dir tests/api/v1

[36m[INFO][0m ================ Backend API Test Runner ================
[36m[INFO][0m Mode: local
[36m[INFO][0m Project root: C:\Users\Boulanger\Code\pdf-tei-editor

[36m[INFO][0m Loading fixture: standard
[32m[OK][0m Fixture config loaded
[36m[INFO][0m Loading environment from: tests\api\v1\.env.test (--test-dir)
[dotenv@17.2.2] injecting env (9) from tests\api\v1\.env.test -- tip: ðŸ“¡ observe env with Radar: https://dotenvx.com/radar
[36m[INFO][0m Discovering tests
[32m[OK][0m Found 12 test files
[32m[OK][0m Running 12 test files

[36m[INFO][0m Starting local server
[INFO] Auto-selected available ports: 8010 (main), 8020 (WebDAV)
[36m[INFO][0m Wiping database for clean slate
[INFO] Removing SQLite database files
[INFO] Removed metadata.db
[INFO] Removed sessions.db
[INFO] Removed locks.db
[INFO] Cleaning file storage
[INFO] Removed files directory
[INFO] Recreated empty files directory
[SUCCESS] Database wiped - ready for fixture import
[INFO] Using explicitly specified port 8020 for WebDAV server
[36m[INFO][0m Killing any running WebDAV servers on port 8020
[SUCCESS] WebDAV servers stopped
[36m[INFO][0m Creating WebDAV directories
[INFO] Created WebDAV root: C:\Users\BOULAN~1\AppData\Local\Temp\webdav-test
[INFO] Created remote root directory: C:\Users\BOULAN~1\AppData\Local\Temp\webdav-test\pdf-tei-editor
[36m[INFO][0m Starting WsgiDAV server on port 8020
[INFO] WebDAV process PID: 4808
[SUCCESS] WebDAV server started on port 8020
[INFO]   Auth: anonymous (no credentials needed for testing)
[SUCCESS] WebDAV health check passed
[INFO] Created temporary env file: C:\Users\BOULAN~1\AppData\Local\Temp\fastapi-test-41ab525134899b40.env
[SUCCESS] WebDAV configuration written to temp env file
[INFO] Set FASTAPI_ENV_FILE=C:\Users\BOULAN~1\AppData\Local\Temp\fastapi-test-41ab525134899b40.env

[36m[INFO][0m Starting FastAPI development server
[INFO] Starting server (output in C:\Users\Boulanger\Code\pdf-tei-editor\tests\api\runtime\logs\server.log)...
[INFO] Server PID: 29196
[36m[INFO][0m Waiting for server startup (timeout: 30s)
[INFO] Still waiting... (3s)
[INFO] Still waiting... (6s)
[INFO] Still waiting... (9s)
[INFO] Still waiting... (12s)
[INFO] Still waiting... (15s)
[INFO] Still waiting... (18s)
[INFO] Still waiting... (21s)
[INFO] Still waiting... (24s)
[INFO] Still waiting... (27s)
[INFO] Still waiting... (30s)
[ERROR] Server failed to start within 30s
[ERROR] Check log file: C:\Users\Boulanger\Code\pdf-tei-editor\tests\api\runtime\logs\server.log

[ERROR] Last 30 lines of log:

[31m[ERROR][0m Test runner failed: Server failed to start
Error: Server failed to start
    at LocalServerManager.start (file:///C:/Users/Boulanger/Code/pdf-tei-editor/tests/lib/local-server-manager.js:543:13)
    at async main (file:///C:/Users/Boulanger/Code/pdf-tei-editor/tests/backend-test-runner.js:325:21)
[36m[INFO][0m Cleaning up...
[INFO] Stopping FastAPI server (PID: 29196)
[ERROR] Server process exited with code 1
[36m[INFO][0m Cleaning up WebDAV server...
[INFO] Stopping WebDAV server (PID: 4808)
[INFO] Cleaned up WebDAV root: C:\Users\BOULAN~1\AppData\Local\Temp\webdav-test
[SUCCESS] WebDAV cleanup complete
[INFO] Cleaned up temp env file: C:\Users\BOULAN~1\AppData\Local\Temp\fastapi-test-41ab525134899b40.env
[SUCCESS] Cleanup complete
